{"ast":null,"code":"var _jsxFileName = \"/Users/siangling/starter-restaurant-reservation/front-end/src/search/Search.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport ReservationsList from \"../reservations/ReservationsList\";\nimport ErrorAlert from \"../layout/ErrorAlert\";\nimport { listReservations } from \"../utils/api\";\nimport \"./Search.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Search() {\n  _s();\n  const [error, setError] = useState(null);\n  const [mobile_number, setMobileNumber] = useState(\"\");\n  const [reservations, setReservations] = useState([]);\n  const [reservationMessage, setReservationMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false); // Add loading state\n\n  // Change handler //\n  const handleChange = ({\n    target\n  }) => {\n    setMobileNumber(target.value);\n  };\n\n  // Handle find //\n  const handleFind = event => {\n    event.preventDefault();\n    setIsLoading(true); // Start loading when search is triggered\n\n    const abortController = new AbortController();\n    listReservations({\n      mobile_number\n    }, abortController.signal).then(reservations => {\n      if (reservations.length) {\n        setReservations(reservations);\n        setReservationMessage(\"\");\n      } else {\n        setReservations([]);\n        setReservationMessage(\"No reservations found.\");\n      }\n    }).catch(error => setError(error)).finally(() => setIsLoading(false)); // Stop loading after the search\n\n    return () => abortController.abort();\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"search-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-md-flex mb-3 justify-content-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"search-header\",\n        children: \"Reservation Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ErrorAlert, {\n        error: error,\n        setError: setError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-group mb-3\",\n      id: \"mobileSearchBox\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"mobile_number\",\n        className: \"form-control search-input\",\n        onChange: handleChange,\n        value: mobile_number,\n        placeholder: \"Enter a customer's phone number\",\n        \"aria-label\": \"Enter a customer's phone number\",\n        \"aria-describedby\": \"button-addon2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn search-btn\",\n        type: \"submit\",\n        id: \"button-addon2\",\n        onClick: handleFind,\n        disabled: isLoading // Disable button when loading\n        ,\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"spinner-border spinner-border-sm\",\n          role: \"status\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this) : \"Find\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-indicator\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Searching for reservations...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reservationsList\",\n      children: reservations.length ? /*#__PURE__*/_jsxDEV(ReservationsList, {\n        reservations: reservations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: reservationMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(Search, \"62Usn53qf0Gg6f6S+J+zcNrPw2M=\");\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","ReservationsList","ErrorAlert","listReservations","jsxDEV","_jsxDEV","Search","_s","error","setError","mobile_number","setMobileNumber","reservations","setReservations","reservationMessage","setReservationMessage","isLoading","setIsLoading","handleChange","target","value","handleFind","event","preventDefault","abortController","AbortController","signal","then","length","catch","finally","abort","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","type","name","onChange","placeholder","onClick","disabled","role","_c","$RefreshReg$"],"sources":["/Users/siangling/starter-restaurant-reservation/front-end/src/search/Search.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport ReservationsList from \"../reservations/ReservationsList\";\nimport ErrorAlert from \"../layout/ErrorAlert\";\nimport { listReservations } from \"../utils/api\";\nimport \"./Search.css\";\n\nfunction Search() {\n  const [error, setError] = useState(null);\n  const [mobile_number, setMobileNumber] = useState(\"\");\n  const [reservations, setReservations] = useState([]);\n  const [reservationMessage, setReservationMessage] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false); // Add loading state\n\n  // Change handler //\n  const handleChange = ({ target }) => {\n    setMobileNumber(target.value);\n  };\n\n  // Handle find //\n  const handleFind = (event) => {\n    event.preventDefault();\n    setIsLoading(true); // Start loading when search is triggered\n\n    const abortController = new AbortController();\n    listReservations({ mobile_number }, abortController.signal)\n      .then((reservations) => {\n        if (reservations.length) {\n          setReservations(reservations);\n          setReservationMessage(\"\");\n        } else {\n          setReservations([]);\n          setReservationMessage(\"No reservations found.\");\n        }\n      })\n      .catch((error) => setError(error))\n      .finally(() => setIsLoading(false)); // Stop loading after the search\n\n    return () => abortController.abort();\n  };\n\n  return (\n    <main className=\"search-page\">\n      <div className=\"d-md-flex mb-3 justify-content-start\">\n        <h2 className=\"search-header\">Reservation Search</h2>\n        <ErrorAlert error={error} setError={setError} />\n      </div>\n\n      {/* Search Box */}\n      <div className=\"input-group mb-3\" id=\"mobileSearchBox\">\n        <input \n          type=\"text\" \n          name=\"mobile_number\"\n          className=\"form-control search-input\" \n          onChange={handleChange}\n          value={mobile_number}\n          placeholder=\"Enter a customer's phone number\" \n          aria-label=\"Enter a customer's phone number\" \n          aria-describedby=\"button-addon2\" \n        />\n        <button \n          className=\"btn search-btn\" \n          type=\"submit\" \n          id=\"button-addon2\"\n          onClick={handleFind}\n          disabled={isLoading} // Disable button when loading\n        >\n          {isLoading ? (\n            <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n          ) : (\n            \"Find\"\n          )}\n        </button>\n      </div>\n\n      {/* Loading or No Results Feedback */}\n      {isLoading ? (\n        <div className=\"loading-indicator\">\n          <p>Searching for reservations...</p>\n        </div>\n      ) : (\n        <div className=\"reservationsList\">\n          {reservations.length ? (\n            <ReservationsList reservations={reservations} />\n          ) : (\n            <h3>{reservationMessage}</h3>\n          )}\n        </div>\n      )}\n    </main>\n  );\n}\n\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}