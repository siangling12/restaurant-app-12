{"ast":null,"code":"var _jsxFileName = \"/Users/siangling/starter-restaurant-reservation/front-end/src/reservations/EditReservation.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { readReservation, updateReservation } from \"../utils/api\";\nimport ReservationForm from \"./ReservationForm\";\nimport ErrorAlert from \"../layout/ErrorAlert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditReservation() {\n  _s();\n  const history = useHistory();\n  const {\n    reservation_id\n  } = useParams(); // Destructure to extract reservation_id\n\n  const [error, setError] = useState(null);\n  const [reservation, setReservation] = useState({\n    first_name: \"\",\n    last_name: \"\",\n    mobile_number: \"\",\n    reservation_date: \"\",\n    reservation_time: \"12:00 PM\",\n    // Default value in 12-hour format with AM/PM\n    people: 1 // Default value as a number\n  });\n\n  // Load reservation by id //\n  useEffect(() => {\n    const abortController = new AbortController();\n    async function loadReservation() {\n      try {\n        const response = await readReservation(Number(reservation_id), abortController.signal); // Convert to number\n        setReservation({\n          ...response,\n          reservation_time: formatTime12Hour(response.reservation_time) // Ensure the time is in 12-hour format\n        });\n      } catch (error) {\n        setError(error);\n      }\n    }\n    loadReservation();\n    return () => abortController.abort();\n  }, [reservation_id]);\n\n  // Function to ensure the time is formatted as 12-hour time with AM/PM\n  function formatTime12Hour(timeString) {\n    const [hour, minute] = timeString.split(\":\");\n    const hourNumber = parseInt(hour);\n    const ampm = hourNumber >= 12 ? \"PM\" : \"AM\";\n    const formattedHour = hourNumber % 12 || 12; // Convert to 12-hour format\n    return `${formattedHour}:${minute} ${ampm}`;\n  }\n\n  // Handlers //\n  const handleChange = ({\n    target\n  }) => {\n    setReservation({\n      ...reservation,\n      [target.name]: target.name === \"people\" ? Number(target.value) : target.value // Ensure people is a number\n    });\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const abortController = new AbortController();\n    try {\n      await updateReservation(Number(reservation_id), reservation, abortController.signal); // Convert reservation_id to number\n      history.push(`/dashboard?date=${reservation.reservation_date.slice(0, 10)}`);\n    } catch (error) {\n      setError(error);\n    }\n    return () => abortController.abort();\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-md-flex mb-3 flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Edit Reservation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ErrorAlert, {\n        error: error,\n        setError: setError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReservationForm, {\n      reservation: reservation,\n      handleSubmit: handleSubmit,\n      handleChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(EditReservation, \"eF6HSMwQXiKbYNQK/RjoZf2GUw0=\", false, function () {\n  return [useHistory, useParams];\n});\n_c = EditReservation;\nexport default EditReservation;\nvar _c;\n$RefreshReg$(_c, \"EditReservation\");","map":{"version":3,"names":["React","useState","useEffect","useHistory","useParams","readReservation","updateReservation","ReservationForm","ErrorAlert","jsxDEV","_jsxDEV","EditReservation","_s","history","reservation_id","error","setError","reservation","setReservation","first_name","last_name","mobile_number","reservation_date","reservation_time","people","abortController","AbortController","loadReservation","response","Number","signal","formatTime12Hour","abort","timeString","hour","minute","split","hourNumber","parseInt","ampm","formattedHour","handleChange","target","name","value","handleSubmit","event","preventDefault","push","slice","children","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/siangling/starter-restaurant-reservation/front-end/src/reservations/EditReservation.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { readReservation, updateReservation } from \"../utils/api\";\nimport ReservationForm from \"./ReservationForm\";\nimport ErrorAlert from \"../layout/ErrorAlert\";\n\nfunction EditReservation() {\n  const history = useHistory();\n  const { reservation_id } = useParams();  // Destructure to extract reservation_id\n\n  const [error, setError] = useState(null);\n  const [reservation, setReservation] = useState({\n    first_name: \"\",\n    last_name: \"\",\n    mobile_number: \"\",\n    reservation_date: \"\",\n    reservation_time: \"12:00 PM\", // Default value in 12-hour format with AM/PM\n    people: 1, // Default value as a number\n  });\n\n  // Load reservation by id //\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    async function loadReservation() {\n      try {\n        const response = await readReservation(Number(reservation_id), abortController.signal);  // Convert to number\n        setReservation({\n          ...response,\n          reservation_time: formatTime12Hour(response.reservation_time), // Ensure the time is in 12-hour format\n        });\n      } catch (error) {\n        setError(error);\n      }\n    }\n\n    loadReservation();\n\n    return () => abortController.abort();\n  }, [reservation_id]);\n\n  // Function to ensure the time is formatted as 12-hour time with AM/PM\n  function formatTime12Hour(timeString) {\n    const [hour, minute] = timeString.split(\":\");\n    const hourNumber = parseInt(hour);\n    const ampm = hourNumber >= 12 ? \"PM\" : \"AM\";\n    const formattedHour = hourNumber % 12 || 12; // Convert to 12-hour format\n    return `${formattedHour}:${minute} ${ampm}`;\n  }\n\n  // Handlers //\n  const handleChange = ({ target }) => {\n    setReservation({ \n      ...reservation, \n      [target.name]: target.name === \"people\" ? Number(target.value) : target.value  // Ensure people is a number\n    });\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const abortController = new AbortController();\n\n    try {\n      await updateReservation(Number(reservation_id), reservation, abortController.signal);  // Convert reservation_id to number\n      history.push(`/dashboard?date=${reservation.reservation_date.slice(0, 10)}`);\n    } catch (error) {\n      setError(error);\n    }\n\n    return () => abortController.abort();\n  };\n\n  return (\n    <main>\n      <div className=\"d-md-flex mb-3 flex-column\">\n        <h1>Edit Reservation</h1>\n        <ErrorAlert error={error} setError={setError} />\n      </div>\n\n      <ReservationForm\n        reservation={reservation}\n        handleSubmit={handleSubmit}\n        handleChange={handleChange}\n      />\n    </main>\n  );\n}\n\nexport default EditReservation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}